@model CRM.Models.Crm.EmployeeRegistration
@{
    ViewData["Title"] = "Employee";
    Layout = "~/Views/Shared/_adminLayout.cshtml";
}
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>


<script>
    document.addEventListener("DOMContentLoaded", function () {
        var message = "@TempData["Message"]";

        if (message == "ok" || message == "dltok" || message == "updok") {
            if (message) {
                let alertText;

                if (message == "dltok") {
                    alertText = "Deleted successfully.";
                } else if (message == "updok") {
                    alertText = "Employee updated successfully.";
                } else {
                    alertText = "Employee added successfully.";
                }

                Swal.fire({
                    title: 'Success',
                    text: alertText,
                    icon: 'success',
                    confirmButtonText: 'OK'
                }).then((result) => {
                    if (result.isConfirmed) {
                        setTimeout(function () {
                            window.location.href = '@Url.Action("Employeelist", "Employee")';
                        }, 1000);
                    }
                });
            }
        }
        else {
            if (message) {
                Swal.fire({
                    title: 'Failed',
                    text: message,
                    icon: 'error',
                    confirmButtonText: 'OK'
                }).then((result) => {
                    if (result.isConfirmed) {
                        setTimeout(function () {
                            window.location.href = '@Url.Action("Employeelist", "Employee")';
                        }, 1000);
                    }
                });
            }
        }
    });
</script>
<style>
    h1 {
        text-align: center;
    }

    h2 {
        margin: 0;
    }

    #multi-step-form-container {
        margin-top: 4rem;
        width: 100%;
        padding-right: 100px;
        padding-left: 120px;
        margin-right: auto;
        margin-left: auto;
    }

    .text-center {
        text-align: center;
    }

    .mx-auto {
        margin-left: auto;
        margin-right: auto;
    }

    .pl-0 {
        padding-left: 0;
    }

    .button {
        padding: 0.7rem 1.5rem;
        border: 1px solid #4361ee;
        background-color: #4361ee;
        color: #fff;
        border-radius: 5px;
        cursor: pointer;
    }

    .submit-btn {
        border: 1px solid #0e9594;
        background-color: #0e9594;
    }

    .mt-3 {
        margin-top: 2rem;
    }

    .d-none {
        display: none;
    }

    .form-step {
        border: 1px solid rgba(0, 0, 0, 0.1);
        border-radius: 20px;
        padding: 3rem;
    }

    .font-normal {
        font-weight: normal;
    }

    ul.form-stepper {
        counter-reset: section;
        margin-bottom: 3rem;
    }

        ul.form-stepper .form-stepper-circle {
            position: relative;
        }

            ul.form-stepper .form-stepper-circle span {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translateY(-50%) translateX(-50%);
            }

    .form-stepper-horizontal {
        position: relative;
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        -webkit-box-pack: justify;
        -ms-flex-pack: justify;
        justify-content: space-between;
    }

    ul.form-stepper > li:not(:last-of-type) {
        margin-bottom: 0.625rem;
        -webkit-transition: margin-bottom 0.4s;
        -o-transition: margin-bottom 0.4s;
        transition: margin-bottom 0.4s;
    }

    .form-stepper-horizontal > li:not(:last-of-type) {
        margin-bottom: 0 !important;
    }

    .form-stepper-horizontal li {
        position: relative;
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        -webkit-box-flex: 1;
        -ms-flex: 1;
        flex: 1;
        -webkit-box-align: start;
        -ms-flex-align: start;
        align-items: start;
        -webkit-transition: 0.5s;
        transition: 0.5s;
    }

        .form-stepper-horizontal li:not(:last-child):after {
            position: relative;
            -webkit-box-flex: 1;
            -ms-flex: 1;
            flex: 1;
            height: 1px;
            content: "";
            top: 32%;
        }

        .form-stepper-horizontal li:after {
            background-color: #dee2e6;
        }

        .form-stepper-horizontal li.form-stepper-completed:after {
            background-color: #4da3ff;
        }

        .form-stepper-horizontal li:last-child {
            flex: unset;
        }

    ul.form-stepper li a .form-stepper-circle {
        display: inline-block;
        width: 40px;
        height: 40px;
        margin-right: 0;
        line-height: 1.7rem;
        text-align: center;
        background: rgba(0, 0, 0, 0.38);
        border-radius: 50%;
    }

    .form-stepper .form-stepper-active .form-stepper-circle {
        background-color: #00baf2 !important;
        color: #fff;
    }

    .form-stepper .form-stepper-active .label {
        color: #4361ee !important;
    }

    .form-stepper .form-stepper-active .form-stepper-circle:hover {
        background-color: #00baf2 !important;
        color: #fff !important;
    }

    .form-stepper .form-stepper-unfinished .form-stepper-circle {
        background-color: #00baf2 !important;
        color: #fff !important;
    }

    .form-stepper .form-stepper-completed .form-stepper-circle {
        background-color: #00baf2 !important;
        color: #fff !important;
    }

    .form-stepper .form-stepper-completed .label {
        color: #0e9594 !important;
    }

    .form-stepper .form-stepper-completed .form-stepper-circle:hover {
        background-color: #0e9594 !important;
        color: #fff !important;
    }

    .form-stepper .form-stepper-active span.text-muted {
        color: #fff !important;
    }

    .form-stepper .form-stepper-completed span.text-muted {
        color: #fff !important;
    }

    .form-stepper .label {
        font-size: 1rem;
        margin-top: 0.5rem;
    }

    .form-stepper a {
        cursor: default;
    }
</style>
<style>
    .col-lg-4 {
        margin-bottom: 20px; /* Adjust spacing between columns as needed */
    }

    label {
        font-weight: bold;
    }

    .input-group {
        position: relative;
        display: flex;
        flex-wrap: wrap;
        align-items: stretch;
        width: 100%;
    }

    .input-group-text {
        display: flex;
        align-items: center;
        padding: 0.375rem 0.75rem;
        margin-bottom: 0;
        font-size: 1rem;
        font-weight: 400;
        line-height: 1.5;
        color: #495057;
        text-align: center;
        white-space: nowrap;
        background-color: #e9ecef;
        border: 1px solid #ced4da;
        border-radius: 0.25rem;
    }

    .input-group > .form-control {
        position: relative;
        flex: 1 1 auto;
        width: 1%;
        margin-bottom: 0;
    }

    .form-control {
        display: block;
        width: 100%;
        padding: 0.375rem 0.75rem;
        font-size: 1rem;
        font-weight: 400;
        line-height: 1.5;
        color: #495057;
        background-color: #fff;
        background-clip: padding-box;
        border: 1px solid #ced4da;
        border-radius: 0.25rem;
        transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
    }

        .form-control:focus {
            border-color: #80bdff;
            outline: 0;
            box-shadow: 0 0 0 0.25rem rgba(0, 123, 255, 0.25);
        }

</style>
<link href="~/css/style.css" rel="stylesheet" />
<div class="page-wrapper">
    <div class="page-body-wrapper">
        <div class="page-sidebar">
        </div>

        <div class="page-body">
            <!-- Container-fluid starts-->
            <div id="multi-step-form-container">
                <div class="containder-fluid">
                    <div class="page-header">
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="page-header-left">
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <ol class="breadcrumb pull-right">
                                    <li class="breadcrumb-item"><a href="/Home/Dashboard"><i data-feather="home"></i></a></li>
                                    <li class="breadcrumb-item">HR Payrole</li>
                                    <li class="breadcrumb-item active">Employee</li>
                                    <li class="breadcrumb-item active">EmployeeRegistration</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>
                <div style="text-align:center;">
                    <h3>
                        Employee Registration
                    </h3>
                </div>
                <!-- Form Steps / Progress Bar -->
                <ul class="form-stepper form-stepper-horizontal text-center mx-auto pl-0">
                    <!-- Step 1 -->
                    <li class="form-stepper-active text-center form-stepper-list" step="1">
                        <a class="mx-2">
                            <span class="form-stepper-circle">
                                <span>1</span>
                            </span>
                            <div class="label">Basic info</div>
                        </a>
                    </li>
                    <!-- Step 2 -->
                    <li class="form-stepper-unfinished text-center form-stepper-list" step="2">
                        <a class="mx-2">
                            <span class="form-stepper-circle text-muted">
                                <span>2</span>
                            </span>
                            <div class="label text-muted">Persnal info.</div>
                        </a>
                    </li>
                    <!-- Step 3 -->
                    <li class="form-stepper-unfinished text-center form-stepper-list" step="3">
                        <a class="mx-2">
                            <span class="form-stepper-circle text-muted">
                                <span>3</span>
                            </span>
                            <div class="label text-muted">Payment info</div>
                        </a>
                    </li>
                    <!-- Step 4 -->
                    <li class="form-stepper-unfinished text-center form-stepper-list" step="4">
                        <a class="mx-2">
                            <span class="form-stepper-circle text-muted">
                                <span>4</span>
                            </span>
                            <div class="label text-muted">Salary Details</div>
                        </a>
                    </li>
                </ul>
                <!-- Step Wise Form Content -->
                <form action="/Employee/EmployeeRegistration" enctype="multipart/form-data" method="POST" autocomplete="off">
                    <!-- Step 1 Content -->
                    <input hidden name="Emp_Reg_ID" type="text" value="@ViewBag.Emp_Reg_Code" />
                    <section id="step-1" class="form-step">
                        <h2 class="text-danger">Basic info</h2>
                        <div class="mt-3">
                            <div class="row">
                                <div class="col">
                                    <label>First Name<span class="text-danger">*</span></label>
                                    <input class="form-control" name="FirstName" value="@ViewBag.First_Name" placeholder="Enter First Name" id="FirstName" type="text">
                                    <span id="FirstNameError" class="text-danger" style="display:none;">First Name is required</span>
                                </div>
                                <div class="col">
                                    <label>Middle Name</label>
                                    <input class="form-control" name="MiddleName" value="@ViewBag.Middle_Name" placeholder="Enter Middle Name" id="MiddleName" type="text">
                                </div>
                                <div class="col">
                                    <label>Last Name</label>
                                    <input class="form-control" name="LastName" value="@ViewBag.Last_Name" placeholder="Enter Last Name" id="LastName" type="text">
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6">
                                    <label>Work Email</label>
                                    <input class="form-control" name="WorkEmail" value="@ViewBag.Work_Email" placeholder="Enter Work Email" id="WorkEmail" type="email">
                                </div>
                                <div class="col-md-6">
                                    <label>Date Of Joining<span class="text-danger">*</span></label>
                                    <input class="form-control" name="DateOfJoining" value="@ViewBag.Date_Of_Joining" id="DateOfJoining" type="date">
                                    <span id="DateOfJoiningError" class="text-danger" style="display:none;">Date Of Joining is required</span>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-3">
                                    <label>Gender<span class="text-danger">*</span></label>
                                    <select name="GenderID" id="ddlGender" class="form-control">
                                        <option value="0">-- Select Gender --</option>
                                        <option value="1">Female</option>
                                        <option value="2">Male</option>
                                        <option value="3">Other</option>
                                    </select>
                                    <span id="GenderError" class="text-danger" style="display:none;">Please select Gender</span>
                                </div>

                                <div class="col-md-3">
                                    <label>State Name<span class="text-danger">*</span></label>
                                    <select class="form-control" name="StateId" id="ddlStates">
                                        <option value="0">-- Select State --</option>
                                    </select>
                                    <span id="StateError" class="text-danger" style="display:none;">Please select State</span>
                                </div>

                                <div class="col-md-3">
                                    <label>Work Location<span class="text-danger">*</span></label>
                                    <select class="form-control" name="WorkLocationID" id="ddlCity">
                                        <option value="0">-- Select Work Location --</option>
                                    </select>
                                    <span id="WorkLocationError" class="text-danger" style="display:none;">Please select Work Location</span>
                                </div>

                                <div class="col-md-3">
                                    <label>Department<span class="text-danger">*</span></label>
                                    <select name="DepartmentID" class="form-control" id="ddDepartmentID">
                                        <option value="0">-- Select Department --</option>
                                    </select>
                                    <span id="DepartmentError" class="text-danger" style="display:none;">Please select Department</span>
                                </div>
                                </div>
                                <div class="row">
                                <div class="col-md-3">
                                    <label>Designation<span class="text-danger">*</span></label>
                                    <select name="DesignationID" class="form-control" id="ddDesignationID">
                                        <option value="0">-- Select Designation --</option>
                                    </select>
                                    <span id="DesignationError" class="text-danger" style="display:none;">Please select Designation</span>
                                </div>

                                <div class="col-md-3">
                                    <label>Accept Offer Letter<span class="text-danger">*</span></label>
                                    <select name="Offerletterid" class="form-control" id="ddOfferletterid">
                                        <option value="0">-- Select Accept Offer --</option>
                                    </select>
                                    <span id="OfferLetterError" class="text-danger" style="display:none;">Please select an option</span>
                                </div>

                                <div class="col-md-3">
                                    <label>Office Shift Type<span class="text-danger">*</span></label>
                                    <select name="OfficeshiftTypeid" class="form-control" id="ddshifttypeidid">
                                        <option value="0">-- Select Office Shift Type --</option>
                                    </select>
                                    <span id="ShiftTypeError" class="text-danger" style="display:none;">Please select Office Shift Type</span>
                                </div>
                            </div>
                        </div>

                        <div class="mt-3">
                            <button class="button btn-navigate-form-step" type="button" step_number="2">Next</button>
                        </div>
                    </section>

                    <!-- Step 2 Content, default hidden on page load. -->
                    <section id="step-2" class="form-step d-none">
                        <h2 class="text-danger">Personal info.</h2>
                        <!-- Step 2 input fields -->
                        <div class="mt-3">
                            <div class="row">
                                <div class="col">
                                    <label>Personal Email Address<span class="text-danger">*</span></label>
                                    <input class="form-control" value='@ViewBag.Personal_Email_Address' placeholder="Enter Personal Email Address" name="PersonalEmailAddress" id="PersonalEmailAddress" type="email">
                                    <span id="PersonalEmailAddressError" class="text-danger" style="display:none;">Please enter a valid personal email address.</span>
                                </div>

                                <div class="col">
                                    <label>Mobile Number<span class="text-danger">*</span></label>
                                    <div class="input-group">
                                        <span class="input-group-text" id="basic-addon1">+91</span>
                                        <input class="form-control" value='@ViewBag.Mobile_Number' name="MobileNumber" placeholder="Enter Mobile Number" id="MobileNumber" type="text" maxlength="10" minlength="10">
                                    </div>
                                    <span id="MobileNumberError" class="text-danger" style="display:none;">Please enter a valid mobile number.</span>
                                </div>

                                <div class="col">
                                    <label>Date Of Birth<span class="text-danger">*</span></label>
                                    <input class="form-control" value='@ViewBag.Date_Of_Birth' name="DateOfBirth" id="dobInput" type="date">
                                    <span id="DateOfBirthError" class="text-danger" style="display:none;">Please enter a valid date of birth.</span>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col">
                                    <label>Age</label>
                                    <input class="form-control" value='@ViewBag.Age' id="ageInput" type="text" readonly>
                                </div>

                                <div class="col">
                                    <label>Father Name<span class="text-danger">*</span></label>
                                    <input class="form-control" value='@ViewBag.Father_Name' name="FatherName" id="FatherName" placeholder="Enter Father Name" type="text">
                                    <span id="FatherNameError" class="text-danger" style="display:none;">Please enter your father's name.</span>
                                </div>

                                <div class="col">
                                    <label>PAN<span class="text-danger">*</span></label>
                                    <input class="form-control" value='@ViewBag.PAN' name="PAN" id="PAN" placeholder="Enter PAN" type="text">
                                    <span id="PANError" class="text-danger" style="display:none;">Please enter a valid PAN number.</span>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col">
                                    <label>Address 1<span class="text-danger">*</span></label>
                                    <input class="form-control" value='@ViewBag.Address_Line_1' name="AddressLine1" placeholder="Enter Address Line1" id="AddressLine1" type="text">
                                    <span id="AddressLine1Error" class="text-danger" style="display:none;">Please enter Address Line 1.</span>
                                </div>

                                <div class="col">
                                    <label>Address 2</label>
                                    <input class="form-control" value='@ViewBag.Address_Line_2' name="AddressLine2" placeholder="Enter Address Line2" id="AddressLine2" type="text">
                                </div>

                                <div class="col">
                                    <label>State<span class="text-danger">*</span></label>
                                    <select class="form-control" id="ddlState" name="StateID">
                                        <option value="0">-- Select State --</option>
                                    </select>
                                    <span id="StateIDError" class="text-danger" style="display:none;">Please select a state.</span>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col">
                                    <label>City<span class="text-danger">*</span></label>
                                    <select class="form-control" name="City" id="City">
                                        <option value="0">-- Select City --</option>
                                    </select>
                                    <span id="CityError" class="text-danger" style="display:none;">Please select a city.</span>
                                </div>

                                <div class="col">
                                    <label>Pincode<span class="text-danger">*</span></label>
                                    <input class="form-control" value='@ViewBag.Pincode' name="Pincode" maxlength="6" id="Pincode" placeholder="Enter Pincode" type="text" onkeydown="validateNumericInput(event)">
                                    <span id="PincodeError" class="text-danger" style="display:none;">Please enter a valid pincode.</span>
                                </div>
                            </div>
                        </div>

                        <div class="mt-3">
                            <button class="button btn-navigate-form-step" type="button" step_number="1">Prev</button>
                            <button class="button btn-navigate-form-step" type="button" step_number="3">Next</button>
                        </div>
                    </section>

                    <section id="step-3" class="form-step d-none">
                        <h2 class="text-danger">Payment info</h2>
                        <!-- Step 3 input fields -->
                        <div class="mt-3">
                            <div class="row">
                                <div class="col">
                                    <label>Account Holder Name<span class="text-danger">*</span></label>
                                    <input class="form-control" value='@ViewBag.Account_Holder_Name' name="AccountHolderName" placeholder="Enter Account Holder Name" id="AccountHolderName" type="text">
                                    <span id="AccountHolderNameError" class="text-danger" style="display:none;">This field is required.</span>
                                </div>
                                <div class="col">
                                    <label>Bank Name<span class="text-danger">*</span></label>
                                    <input class="form-control" value='@ViewBag.Bank_Name' name="BankName" id="BankName" placeholder="Enter Bank Name" type="text">
                                    <span id="BankNameError" class="text-danger" style="display:none;">This field is required.</span>
                                </div>
                                <div class="col">
                                    <label>Account Number<span class="text-danger">*</span></label>
                                    <input class="form-control" value='@ViewBag.Account_Number' name="AccountNumber" placeholder="Enter Account Number" id="AccountNumber" type="text" onkeydown="validateNumericInput(event)">
                                    <span id="AccountNumberError" class="text-danger" style="display:none;">This field is required.</span>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col">
                                    <label>Re-enter Account Number<span class="text-danger">*</span></label>
                                    <input class="form-control" value='@ViewBag.Re_Enter_Account_Number' name="ReEnterAccountNumber" placeholder="Re-enter Account Number" id="ReEnterAccountNumber" type="text" onkeydown="validateNumericInput(event)">
                                    <span id="ReEnterAccountNumberError" class="text-danger" style="display:none;">Account numbers do not match.</span>
                                </div>
                                <div class="col">
                                    <label>IFSC<span class="text-danger">*</span></label>
                                    <input class="form-control" value='@ViewBag.IFSC' name="IFSC" id="IFSC" placeholder="Enter IFSC" type="text">
                                    <span id="IFSCError" class="text-danger" style="display:none;">This field is required.</span>
                                </div>
                                <div class="col">
                                    <label>EPF Number</label>
                                    <input class="form-control" value='@ViewBag.EPF_Number' name="EPF_Number" placeholder="Enter EPF Number" id="EPF_Number" type="text">
                                </div>
                            </div>

                            <div class="row">
                                <div class="col" style="display:none">
                                    <label>Employee Contribution Rate</label>
                                    <input class="form-control" value='@ViewBag.Employee_Contribution_Rate' name="Employee_Contribution_Rate" placeholder="Enter Employee Contribution Rate" id="Employee_Contribution_Rate" type="text">
                                </div>
                                <div class="col" style="display:none">
                                    <label>Deduction Cycle</label>
                                    <select id="ddlDeductionTime" name="Deduction_Cycle" class="form-control">
                                        <option value="0">-- Select Deduction --</option>
                                        <option value="M">Monthly</option>
                                        <option value="Y">Yearly</option>
                                    </select>
                                </div>
                                <div class="col-4">
                                    <label>Nominee's Name</label>
                                    <input class="form-control" value='@ViewBag.nominee' name="nominee" id="nominee" placeholder="Enter nominee name" type="text">
                                </div>
                            </div>

                            <div class="row">
                                <div class="col" style="padding:20px;">
                                    <label>Account Type<span class="text-danger">*</span></label>
                                    <br />
                                    <div class="d-flex gap-2">
                                        <input type="radio" id="rdAcountCurrent" name="AccountTypeID" value="1"> Current
                                        <input type="radio" id="rdAcountSaving" name="AccountTypeID" value="2"> Savings
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mt-3">
                            <button class="button btn-navigate-form-step" type="button" step_number="2">Prev</button>
                            <button class="button btn-navigate-form-step" type="button" step_number="4">Next</button>
                        </div>
                    </section>
                    <section id="step-4" class="form-step d-none">
                        <h2 class="text-danger">Salary Details</h2>
                        <div class="mt-3">
                            <div class="row">
                                <input class="form-control" value='@ViewBag.AnnualCTC' name="AnnualCTC" id="txtAnnualCTC" type="hidden">
                                <div class="col">
                                    <label>Monthly CTC <span class="text-danger">*</span></label>
                                    <input class="form-control" value='@ViewBag.MonthlyCTC' name="MonthlyCTC" placeholder="Enter Monthly CTC" id="txtMonthlyCTC" type="text">
                                    <span id="MonthlyCTCError" class="text-danger" style="display:none;">Monthly CTC is required and must contain a decimal point.</span>
                                </div>
                                <div class="col">
                                    <label>Special Allowance</label>
                                    <input class="form-control" value='@ViewBag.specialallowance' name="SpecialAllowance" id="SpecialAllowance" placeholder="Enter Special Allowance" type="text">
                                </div>
                                <div class="col">
                                    <label>Basic</label>
                                    <input class="form-control" value='@ViewBag.Basic' name="Basic" placeholder="00.0" id="txtBasicSalary" type="text" readonly>
                                </div>
                            </div>

                            <br>

                            <div class="row">
                                <div class="col">
                                    <label>House Rent Allowance</label>
                                    <input class="form-control" value='@ViewBag.HouseRentAllowance' name="HouseRentAllowance" placeholder="00.0" id="txtHouseRentAllowance" type="text" readonly>
                                </div>
                                <div class="col">
                                    <label>Gross</label>
                                    <input class="form-control" value='@ViewBag.gross' name="gross" id="txtgross" type="text" readonly>
                                </div>
                                <div class="col">
                                    <label>Monthly Gross Pay</label>
                                    <input class="form-control" value='@ViewBag.MonthlyGrossPay' name="MonthlyGrossPay" placeholder="00.0" id="txtMonthlyGrossPay" type="text" readonly>
                                </div>
                                <input class="form-control" value='@ViewBag.servicecharge' name="servicecharge" id="Servicecharge" type="hidden">
                            </div>

                            <br>

                            <h4 class="text-danger EmployeeContribution">Employee Contribution</h4>
                            <div class="row">
                                <div class="col ProfessionaltaxLabel">
                                    <label id="ProfessionaltaxLabel">Professional Tax</label>
                                    <input class="form-control" value='@ViewBag.Professionaltax' name="Professionaltax" placeholder="Enter Professional Tax" id="Professionaltax" type="text" readonly>
                                </div>
                                <div class="col ESICLabel">
                                    <label id="ESICLabel">ESIC</label>
                                    <input class="form-control" value='@ViewBag.ESIC' name="ESIC" id="ESIC" type="text" readonly>
                                </div>
                                <div class="col" style="display:none">
                                    <label>TDS (<span id="displayTdsPercentage">@ViewBag.Tdspercentage</span>%)</label>
                                    <input class="form-control" value='@ViewBag.Amount' name="Amount" placeholder="00.0" id="txtAmount" type="text" readonly>
                                    <input class="form-control" name="TdsPercentage" value='@ViewBag.Tdspercentage' placeholder="00.0" id="txtTdspercentage" type="hidden">
                                </div>
                                <div class="col txtLabelEPF">
                                    <label id="txtLabelEPF">EPF</label>
                                    <input class="form-control" value='@ViewBag.EPF' name="EPF" placeholder="00.0" id="txtEPF" type="text" readonly>
                                </div>
                            </div>

                            <br>

                            <h4 class="text-danger">Employer Contribution</h4>
                            <div class="row">
                                <div class="col">
                                    <label>EPF (<span id="displayEPFMaster">@ViewBag.epfNumber</span>%)</label>
                                    <input class="form-control" name="EPF" placeholder="00.0" id="txtEPFMaster" type="text" readonly>
                                    <input class="form-control" name="Epf_Number" value='@ViewBag.epfNumber' placeholder="00.0" id="txtepfNumber" type="hidden">
                                </div>
                                <div class="col">
                                    <label>ESIC (<span id="displayESICMaster">@ViewBag.epfNumber</span>%)</label>
                                    <input class="form-control" name="ESIC_Number" id="ESICMaster" type="text" readonly>
                                </div>
                            </div>
                        </div>

                        <div class="mt-3">
                            <button class="button btn-navigate-form-step" type="button" step_number="3">Prev</button>
                            <button class="button submit-btn" onclick="return fnValidate()" type="submit">@ViewBag.btnText</button>
                        </div>
                    </section>

                </form>
            </div>

        </div>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script src="~/js/multiformvalidation.js"></script>
<script>
    if ($("#txtEPF").val() == 0)
    {
        document.querySelectorAll('.txtLabelEPF').forEach(el => el.style.display = 'none'); 
        $(".EmployeeContribution").hide();
    } 
    if ($("#ESIC").val() == 0) {
        document.querySelectorAll('.ESICLabel').forEach(el => el.style.display = 'none');
        $(".EmployeeContribution").hide();
    }
    if ($("#Professionaltax").val() == 0) {

        document.querySelectorAll('.ProfessionaltaxLabel').forEach(el => el.style.display = 'none');
        $(".EmployeeContribution").hide();
    }
    if ($("#txtEPF").val() != 0 || $("#ESIC").val() != 0 || $("#Professionaltax").val() != 0){
        $(".EmployeeContribution").show();
    }
</script>
 <script>
   
    function bindshifttypeid(OfficeshiftTypeid) {
        var itemsListforshifttypeid = @Json.Serialize(ViewBag.officeshift);
        debugger
        var dropdownforshifttypeid = $("#ddshifttypeidid");
        $.each(itemsListforshifttypeid, function (index, item) {
            dropdownforshifttypeid.append($('<option></option>').val(item.value).text(item.text));
        });
        if (OfficeshiftTypeid != "") {
            $("#ddshifttypeidid").val(OfficeshiftTypeid)
        }
    }
    function bindOfferletter(Offerletterid) {
        var itemsListforOfferletter = @Json.Serialize(ViewBag.Offerletter);
        debugger
        var dropdownforOfferletter = $("#ddOfferletterid");
        $.each(itemsListforOfferletter, function (index, item) {
            dropdownforOfferletter.append($('<option></option>').val(item.value).text(item.text));
        });
        if (Offerletterid != "") {
            $("#ddOfferletterid").val(Offerletterid)
        }
    }
    function bindsStates(StatesId) {
        var itemsList = @Json.Serialize(ViewBag.stes);
        debugger
        var dropdown = $("#ddlStates");
        $.each(itemsList, function (index, item) {
            dropdown.append($('<option></option>').val(item.value).text(item.text));
        });
        if (StatesId != "") {
            $("#ddlStates").val(StatesId)
        }
    }

    function bindworkLocation(WorkLocationId) {
        var itemsList = @Json.Serialize(ViewBag.WorkLocation);
        debugger
        var dropdown = $("#ddlCity");
        $.each(itemsList, function (index, item) {
            dropdown.append($('<option></option>').val(item.value).text(item.text));
        });
        if (WorkLocationId != "") {
            $("#ddlCity").val(WorkLocationId)
        }
    }
    function bindCity(CityId) {
        var itemsList = @Json.Serialize(ViewBag.Cities);
        debugger
        var dropdown = $("#City");
        $.each(itemsList, function (index, item) {
            dropdown.append($('<option></option>').val(item.value).text(item.text));
        });
        if (CityId != "") {
            $("#City").val(CityId)
        }
    }
    function bindDesigation(DesignationID) {
        var itemsListforDesigation = @Json.Serialize(ViewBag.Designation);
        debugger
        var dropdownforDesigation = $("#ddDesignationID");
        $.each(itemsListforDesigation, function (index, item) {
            dropdownforDesigation.append($('<option></option>').val(item.value).text(item.text));
        });
        if (DesignationID != "") {
            $("#ddDesignationID").val(DesignationID)
        }
    }
    function bindDepartment(DepartmentID) {
        var itemsListforDepartment = @Json.Serialize(ViewBag.Department);
        debugger
        var dropdownforDepartment = $("#ddDepartmentID");
        $.each(itemsListforDepartment, function (index, item) {
            dropdownforDepartment.append($('<option></option>').val(item.value).text(item.text));
        });
        if (DepartmentID != "") {
            $("#ddDepartmentID").val(DepartmentID)
        }
    }

    function bindStates(StateId) {
        var itemsListforStates = @Json.Serialize(ViewBag.States);
        debugger
        var dropdownforState = $("#ddlState");
        $.each(itemsListforStates, function (index, item) {
            dropdownforState.append($('<option></option>').val(item.value).text(item.text));
        });
        if (StateId != "") {
            $("#ddlState").val(StateId)
        }
    }

</script> 

<script>
    $(document).ready(function () {
        var annualSalaryInput = $('#txtAnnualCTC');
        var monthlySalaryInput = $('#txtMonthlyCTC');
        var basicSalaryInput = $('#txtBasicSalary');
        var HouseRentAllowanceInput = $('#txtHouseRentAllowance');
        var EPFInput = $('#txtEPF');///---
        var MonthlyGrossPayInput = $('#txtMonthlyGrossPay');
        var ESICInput = $('#ESIC');///
        var ProfessionaltaxInput = $('#Professionaltax');///
        var servicechargeInput = $('#Servicecharge');
        var specialallowanceInput = $('#SpecialAllowance');
        var grossInput = $('#txtgross');
        var AmountInput = $('#txtAmount');///
        var TdspercentageInput = $('#txtTdspercentage');///
        specialallowanceInput.on('input', function () {
            var inputEvent = new Event('input');
            document.getElementById('txtgross').dispatchEvent(inputEvent);

        });

        monthlySalaryInput.on('input', function () {
            var monthlySalary = parseInt($(this).val());
            if (!isNaN(monthlySalary)) {
                var specialallowance = specialallowanceInput.val();
                var amount = AmountInput.val();
                var tdspercentage = TdspercentageInput.val();
                var annualSalary = monthlySalary * 12;
                var basicSalary = monthlySalary / 2;
                var houseRent = basicSalary / 2;
                var EPFCalculation = 0;//monthlySalary * 12 / 100;
                var MonthlyGross = monthlySalary - EPFCalculation;
                if (specialallowance == undefined || specialallowance == "") {
                    var Gross = basicSalary + houseRent + 0;
                } else {
                    var Gross = basicSalary + houseRent + parseInt(specialallowance);
                }

                var ESIC = 0;

                // if (Gross < 21000) {
                //     ESIC = 0;
                // } else {
                //     ESIC = monthlySalary * 0.75 / 100;
                // }
                var professionaltax = 0;
                // switch (true) {
                //     case monthlySalary < 2001:
                //         professionaltax = 200;
                //         break;
                //     case monthlySalary < 15001:
                //         professionaltax = 0;
                //         break;
                //     case monthlySalary > 15000:
                //         professionaltax = 150;
                //         break;
                //     default:
                //         professionaltax = 0;
                // }
                var servicecharge = 0;

                // switch (true) {
                //     case monthlySalary <= 40000:
                //         servicecharge = monthlySalary * 0.0118; // 1.18% of monthlySalary
                //         break;
                //     case monthlySalary > 40000:
                //         servicecharge = monthlySalary * 0.035; // 3.5% of monthlySalary
                //         break;
                // }
                annualSalaryInput.val(annualSalary.toFixed(2));
                monthlySalaryInput.val(monthlySalary);
                basicSalaryInput.val(basicSalary.toFixed(2));
                HouseRentAllowanceInput.val(houseRent.toFixed(2));
                EPFInput.val(EPFCalculation.toFixed(2));
                MonthlyGrossPayInput.val(MonthlyGross.toFixed(2));
                ESICInput.val(ESIC.toFixed(2));
                ProfessionaltaxInput.val(professionaltax.toFixed(2));
                servicechargeInput.val(servicecharge.toFixed(2));
                specialallowanceInput.val(specialallowance);
                grossInput.val(Gross.toFixed(2));
                AmountInput.val(amount);
                TdspercentageInput.val(tdspercentage);
                var inputEvent = new Event('input');
                document.getElementById('txtgross').dispatchEvent(inputEvent);
            } else {
                annualSalaryInput.val('');
                monthlySalaryInput.val('');
                basicSalaryInput.val('');
                HouseRentAllowanceInput.val('');
                EPFInput.val('');
                MonthlyGrossPayInput.val('');
                ESICInput.val('');
                ProfessionaltaxInput.val('');
                servicechargeInput.val('');
                specialallowanceInput.val('');
                grossInput.val('');
                AmountInput.val('');
                TdspercentageInput.val('');

            }
        });

        $("#dobInput").on("input", function () {
            debugger
            var birthdate = $(this).val();
            if (birthdate !== "") {
                var today = new Date();
                var birthDate = new Date(birthdate);

                var age = today.getFullYear() - birthDate.getFullYear();
                var monthDiff = today.getMonth() - birthDate.getMonth();
                if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
                    age--;
                }
                $("#ageInput").val(age);
            } else {
                $("#ageInput").val('');
            }
        });
    });
</script>

<script type="text/javascript">

    var Gender_id = '@ViewBag.Gender_ID';
    if (Gender_id != "") {
        $("#ddlGender").val(Gender_id);
    }
     
    // var customerid = '@ViewBag.CustomerID';
    var workid = '@ViewBag.Work_Location_ID';
    var designationid = '@ViewBag.Designation_ID';
    var departmentid = '@ViewBag.Department_ID';
    var stateid = '@ViewBag.State_ID';
    var statesid = '@ViewBag.statesy';
    var city = '@ViewBag.City';
    var userOfferletter = '@ViewBag.Offerletters';
    var userOfficeshift = '@ViewBag.shifttype';



    if (userOfferletter != "") {
        bindOfferletter(userOfferletter);
    }
    else {
        bindOfferletter("");
    }
    if (userOfficeshift != "") {
        bindshifttypeid(userOfficeshift);
    }
    else {
        bindshifttypeid("");
    }
    // if (customerid != "") {
    //     bindcustomer(customerid);
    // }
    // else {
    //     bindcustomer("");
    // }
    if (workid != "") {
        bindworkLocation(workid);
    }
    else {
        bindworkLocation("");
    }
    if (departmentid != "") {
        bindDepartment(departmentid);
    }
    else {
        bindDepartment("");
    }
    if (designationid != "") {
        bindDesigation(designationid);
    }
    else {
        bindDesigation("");
    }
    if (stateid != "") {
        bindStates(stateid);
    }
    else {
        bindStates("");
    }
    if (statesid != "") {
        bindsStates(statesid);
    }
    else {
        bindsStates("");
    }
    if (city != "") {
        bindCity(city);
    }
    else {
        bindCity("");
    }
   
    var deductiontime = '@ViewBag.Deduction_Cycle';
    if (deductiontime != "") {
        $("#ddlDeductionTime").val(deductiontime);
    }


    var acounttype = '@ViewBag.Account_Type_ID';
    if (acounttype != "") {
        if (acounttype == "1") {
            $("#rdAcountCurrent").prop("checked", true);
            $("#rdAcountSaving").prop("checked", false);
        }
        if (acounttype == "2") {
            $("#rdAcountCurrent").prop("checked", false);
            $("#rdAcountSaving").prop("checked", true);
        }
    }


    var DOBJ = '@ViewBag.Date_Of_Joining';
    if (DOBJ != "") {
        var formattedDate = DOBJ ? new Date(DOBJ).toISOString().split('T')[0] : '';
        $('#DateOfJoining').val(formattedDate);
    }


    var DOBBirth = '@ViewBag.Date_Of_Birth';
    if (DOBBirth != "") {
        var formatDOB = DOBBirth ? new Date(DOBBirth).toISOString().split('T')[0] : '';
        $('#dobInput').val(formatDOB);
    }


</script>

<script>
    $(document).ready(function () {
        $('#MobileNumber').on('keydown', function (e) {
            if ($.inArray(e.keyCode, [46, 8, 9, 27, 13]) !== -1 ||
                (e.keyCode == 65 && e.ctrlKey === true) ||
                (e.keyCode >= 35 && e.keyCode <= 39)) {
                return;
            }

            if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
                e.preventDefault();
            }
        });
    });


</script>
<script>
    $(document).ready(function () {
        $('#AccountNumber').on('input', function (e) {
            var inputValue = $(this).val();
            var numericValue = inputValue.replace(/[^0-9]/g, '');
            var maxLength = 17;
            if (numericValue.length > maxLength) {
                numericValue = numericValue.slice(0, maxLength);
            }
            $(this).val(numericValue);
        });
    });

    $(document).ready(function () {
        $('#ReEnterAccountNumber').on('input', function (e) {
            var inputValue = $(this).val();
            var numericValue = inputValue.replace(/[^0-9]/g, '');
            var maxLength = 17;
            if (numericValue.length > maxLength) {
                numericValue = numericValue.slice(0, maxLength);
            }
            $(this).val(numericValue);
        });
    });

</script>
<script>
    function validateNumericInput(event) {
        if ([46, 8, 9, 27, 13].indexOf(event.keyCode) !== -1 ||
            (event.keyCode == 65 && event.ctrlKey === true) ||
            (event.keyCode >= 35 && event.keyCode <= 39)) {
            return;
        }
        if ((event.shiftKey || (event.keyCode < 48 || event.keyCode > 57)) && (event.keyCode < 96 || event.keyCode > 105)) {
            event.preventDefault();
        }

    }
</script>
<script>
    $(document).ready(function () {
        var grossValue = parseFloat($('#txtgross').val());
        $('#ddCustomerID').on('change', function (e) {
            debugger;
            $.ajax({
                url: '/Employee/tdsDetails?CustomerId=' + $('#ddCustomerID').val(),
                type: 'GET',
                dataType: 'json',
                contentType: 'application/json; charset=utf-8',
                success: function (response) {
                    debugger;
                    if (response.employeerTd.amount <= grossValue) {
                        var amounttds = response.employeerTd.amount * response.employeerTd.tdspercentage / 100;
                        $('#txtAmount').val(amounttds);
                    }

                    $('#txtTdspercentage').val(response.employeerTd.tdspercentage);
                    $('#displayTdsPercentage').text(response.employeerTd.tdspercentage);
                    $('#txtTdspercentage').show();
                },
            });

        });
    });
</script>

<script>
    $(document).ready(function () {
        var grossValue = parseFloat($('#txtgross').val());

        $.ajax({
            url: '/Employee/Epfesilist',
            type: 'GET',
            dataType: 'json',
            contentType: 'application/json; charset=utf-8',
            success: function (response) {
                for (var i = 0; i < response.data.length; i++) {
                    if (response.data[i].deductionCycle == "ESIC") {
                        $('#ESICMaster').val(response.data[i].epfNumber);
                        if (response.data[i].employerContributionRate <= grossValue) {
                            var esicMasterValue = grossValue * response.data[i].epfNumber / 100;
                            $('#ESICMaster').val(esicMasterValue);
                            $('#displayESICMaster').text(response.data[i].epfNumber);
                            $('#txtepfNumber').show();
                        } else {
                            $('#ESICMaster').val(0);
                            $('#displayESICMaster').text(response.data[i].epfNumber);
                            $('#txtepfNumber').show();
                        }

                    }
                    else if (response.data[i].deductionCycle == "EPF") {
                        $('#txtEPFMaster').val(response.data[i].epfNumber);
                        //var groValue = parseFloat($('#txtgross').val());
                        var epfValue = response.data[i].employerContributionRate * response.data[i].epfNumber / 100;
                        $('#txtEPFMaster').val(epfValue);
                        $('#displayEPFMaster').text(response.data[i].epfNumber);
                        $('#txtepfNumber').show();

                    }
                }
            },
        });


    });
</script>
<script>
    $('#txtgross').on('input', function () {
        calesic();
        calepf();
    });
    function calesic() {
        var grossValue = parseFloat($('#txtgross').val());
        if (grossValue > 21000) {
            var esicMasterValue = grossValue * parseFloat($('#displayESICMaster').text()) / 100;
            $('#ESICMaster').val(esicMasterValue);
        } else {
            $('#ESICMaster').val(0);
        }
    }

    function calepf() {
        var groValue = parseFloat($('#txtgross').val());
        var epfValue = response.data[i].employerContributionRate * response.data[i].epfNumber / 100;
        $('#txtEPFMaster').val(epfValue);
    }
</script>
<script>
    $(document).ready(function () {
        var ddlState = $('#ddlStates');
        //ddlState.append($("<option></option>").val('').html('-- Select State --'));
        $.ajax({
            url: '/Home/BindStateDetails',
            type: 'GET',
            dataType: 'json',
            success: function (d) {
                $.each(d, function (i, states) {
                    ddlState.append($("<option></option>").val(states.id).html(states.sName));
                });
            },
            error: function () {
                alert('Error!');
            }
        });
        $("#ddlStates").change(function () {
            var StateId = parseInt($(this).val());
            if (!isNaN(StateId)) {
                var ddlCity = $('#ddlCity');
                ddlCity.append($("<option></option>").val('').html('Please wait ...'));

                debugger;
                $.ajax({
                    url: '/Home/BindCityDetails',
                    type: 'GET',
                    dataType: 'json',
                    data: { stateId: StateId },
                    success: function (d) {
                        ddlCity.empty(); // Clear the plese wait
                        ddlCity.append($("<option></option>").val('').html('-- Select WorkLocation --'));
                        $.each(d, function (i, cities) {
                            ddlCity.append($("<option></option>").val(cities.id).html(cities.city1));
                        });

                    },
                    error: function () {
                        alert('Error!');
                    }
                });
            }
        });
    })
</script>
<script>
    $(document).ready(function () {
        var ddlState = $('#ddlState');
        //ddlState.append($("<option></option>").val('').html('-- Select State --'));
        $.ajax({
            url: '/Home/BindStateDetails',
            type: 'GET',
            dataType: 'json',
            success: function (d) {
                $.each(d, function (i, states) {
                    ddlState.append($("<option></option>").val(states.id).html(states.sName));
                });
            },
            error: function () {
                alert('Error!');
            }
        });
        $("#ddlState").change(function () {
            var StateId = parseInt($(this).val());
            if (!isNaN(StateId)) {
                var ddlCity = $('#City');
                ddlCity.append($("<option></option>").val('').html('Please wait ...'));

                debugger;
                $.ajax({
                    url: '/Home/BindCityDetails',
                    type: 'GET',
                    dataType: 'json',
                    data: { stateId: StateId },
                    success: function (d) {
                        ddlCity.empty(); // Clear the plese wait
                        ddlCity.append($("<option></option>").val('').html('-- Select City --'));
                        $.each(d, function (i, cities) {
                            ddlCity.append($("<option></option>").val(cities.id).html(cities.city1));
                        });

                    },
                    error: function () {
                        alert('Error!');
                    }
                });
            }
        });
    })
</script>


